(this["webpackJsonpshamseya-task"]=this["webpackJsonpshamseya-task"]||[]).push([[0],{25:function(e,t,n){},27:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),s=n.n(r),i=(n(25),n(4)),l=n.n(i),o=n(6),d=n(3),j=(n(27),n(0));var u=function(e){var t=e.disabled,n=e.btnDisabled;return Object(j.jsx)("form",{onSubmit:e.Get_Data,className:"d-flex justify-content-center align-items-center ",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"input-field col l4",children:[Object(j.jsx)("input",{type:"text",className:"datepicker",name:"StartDate",id:"StartDate"}),Object(j.jsx)("label",{htmlFor:"StartDate",children:"Select Start Date"})]}),Object(j.jsxs)("div",{className:"input-field col l4",children:[Object(j.jsx)("input",{type:"text",className:"datepicker",name:"EndDate",id:"EndDate",disabled:t}),Object(j.jsx)("label",{htmlFor:"EndDate",children:"Select End Date"})]}),Object(j.jsx)("div",{className:"col l4",children:Object(j.jsx)("button",{type:"submit",disabled:n,className:"btn btn-primary",children:"Get Data"})})]})})},h=n(9),b=n.n(h),m=function(e){return 2===e.question||4===e.question},x=[],f={headers:{Authorization:"Bearer ".concat("SLSmxK17vjRInEWIiFQjwE1QIDfeSM")}},O=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://staging.mymelior.com/v1/questions",f).then((function(e){x=e.data[0].questions})).catch((function(e){alert(e),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=[{text:"Good",weight:1},{text:"Neutral",weight:0},{text:"Bad",weight:-1}],g=function(e){return p.filter((function(t){return t.text.toLowerCase()===e.toLowerCase()}))},v=function(e){var t=x.findIndex((function(t){return t.id===e.question})),n=x[t].choices.findIndex((function(t){return t.id===e.choice}));return e.text=x[t].text,e.choice_text=x[t].choices[n].text,e.weight=g(e.choice_text)[0].weight,e},y=function(e,t){var n=t.submitted_at,a=t.answers,c=new Date(n).toLocaleString("en-us",{month:"short",year:"2-digit"});return e[c]?(e[c].data.push(a.filter(m).map(v)),e[c].entries++):e[c]={monthyear:c,entries:1,data:[]},e},N=function(e,t){if(e-t!==void 0)return new Date(t.submitted_at)-new Date(e.submitted_at);alert("please Choose Different Dates")},D=[],w=[],S={headers:{Authorization:"Bearer ".concat("SLSmxK17vjRInEWIiFQjwE1QIDfeSM")}},k=function(){var e=Object(o.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://staging.mymelior.com/v1/branches/1/progress","?date_from=").concat(t,"&date_to=").concat(n),e.next=3,b.a.get(a,S).then((function(e){w=e.data.line_chart_data,console.log(w),void 0!==w||null!=w?D=w.sort(N).reduce(y,{}):alert("Please Select Different Date")})).catch((function(e){console.log(e),alert(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n(47);var I=function(){return Object(j.jsx)("div",{className:"spinner-container",children:Object(j.jsx)("div",{className:"progress",children:Object(j.jsx)("div",{className:"indeterminate"})})})},E=n(20),F=function(e,t){return t.flat(1).filter((function(t){return t.question===e})).reduce((function(e,t,n,a){var c=a.length;return e+t.weight/c*100}),0)};var _=function(){var e="#2c3e50",t=Object.entries(D);return Object(j.jsx)("div",{children:Object(j.jsx)("svg",{width:"960",height:"500",style:{fontSize:14},children:Object(j.jsxs)("g",{transform:"translate(40,20)",children:[Object(j.jsxs)("g",{className:"x axis",transform:"translate(0,".concat(450,")"),fill:e,children:[t.map((function(e,t){var n=Object(d.a)(e,2),a=n[0];n[1];return Object(j.jsxs)("g",{className:"tick",transform:"translate(".concat(90*(t+1),",0)"),style:{opacity:1},children:[Object(j.jsx)("line",{y2:"6",x2:"0"}),Object(j.jsx)("text",{dy:".51em",y:"20",x:"0",style:{textAnchor:"middle"},children:a})]},t)})),Object(j.jsx)("path",{className:"domain",d:"M0,6V0H900V6"})]}),Object(j.jsxs)("g",{className:"y axis",fill:e,children:[Object(E.a)(Array(11)).map((function(e,t){return Object(j.jsxs)("g",{className:"tick","data-height":40+40*t,transform:"translate(0,".concat(40+40*t,")"),style:{opacity:1},children:[Object(j.jsx)("line",{x2:"-6",y2:"0"}),Object(j.jsx)("text",{dy:".32em",x:"-9",y:"0",style:{textAnchor:"end"},children:100-10*t})]},t)})),Object(j.jsx)("path",{className:"domain",d:"M-6,0H0V450H-6"}),Object(j.jsx)("text",{transform:"rotate(-90)",y:"6",dy:".71em",style:{textAnchor:"end"},children:"Frequency"})]}),t.map((function(e,t){var n=Object(d.a)(e,2),a=(n[0],n[1]),c=Math.max(0,F(2,a.data).toFixed(1)),r=Math.max(0,F(2,a.data).toFixed(1));return Object(j.jsxs)("g",{className:"tick",transform:"translate( ".concat(90*(t+1.5)-40," , ").concat(450-4.1*c," )"),style:{opacity:1},children:[Object(j.jsxs)("g",{transform:"translate( -20 , 0)",children:[Object(j.jsxs)("text",{transform:"translate( -15 , -10)",children:["(",c,"% "]}),Object(j.jsx)("rect",{className:"bar",x:0,width:20,y:"0",rx:3,height:4.1*c,fill:"#16a085"})]}),Object(j.jsxs)("g",{transform:"translate( -15 , 0)",children:[Object(j.jsxs)("text",{transform:"translate(30 , -10)",children:[r,"% )"]}),Object(j.jsx)("rect",{className:"bar",x:20,width:20,y:"0",rx:3,height:4.1*r,fill:"#f1c40f"})]})]},t)}))]})})})};var C=function(){return Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h4",{children:"More Detailes"}),Object(j.jsx)("ul",{className:"collapsible",children:Object.entries(D).map((function(e,t){var n=Object(d.a)(e,2),a=(n[0],n[1]);return Object(j.jsx)(c.a.Fragment,{children:Object(j.jsxs)("li",{children:[Object(j.jsxs)("div",{className:"collapsible-header",children:[Object(j.jsx)("i",{className:"material-icons",children:"date_range"}),a.monthyear," ",Object(j.jsx)("span",{style:{display:"inline-block",margin:"0 0 0 auto"},children:2*a.entries-2})]}),Object(j.jsx)("div",{className:"collapsible-body",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"center",children:"Question ID "}),Object(j.jsx)("th",{className:"center",children:"Question Text"}),Object(j.jsx)("th",{className:"center",children:"Answer ID"}),Object(j.jsx)("th",{className:"center",children:"Answer"}),Object(j.jsx)("th",{className:"center",children:"Weight"})]})}),Object(j.jsx)("tbody",{children:a.data.map((function(e){return e.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"center",children:e.question}),Object(j.jsx)("td",{className:"center",children:e.text}),Object(j.jsx)("td",{className:"center",children:e.choice}),Object(j.jsx)("td",{className:"center",children:e.choice_text}),Object(j.jsx)("td",{className:"center",children:e.weight})]},t)}))}))})]})})]})},t)}))})]})},q=n(5),A=n.n(q),M=function(e,t,n){return A.a.Datepicker.init(e,{format:"yyyy-mm-dd",autoClose:!0,yearRange:[t,(new Date).getFullYear()],showClearBtn:!0,onClose:n})},B=function(e){var t=document.querySelectorAll(e);A.a.Tooltip.init(t)},L=function(e){var t=document.querySelectorAll(e);A.a.Collapsible.init(t)},Q=function(e){var t=document.querySelectorAll(e);A.a.Modal.init(t)};var G=function(e){var t=e.onClick;return Object(j.jsx)("div",{className:"fixed-action-btn",children:Object(j.jsx)("a",{className:"btn-floating btn-large red modal-trigger detailes-modal-btn",href:"#detailes-modal","data-position":"top","data-tooltip":"More Info",onClick:t,children:Object(j.jsx)("i",{className:"large material-icons",children:"grid_on"})})})};var T=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],h=s[1],b=Object(a.useState)(!0),m=Object(d.a)(b,2),x=m[0],f=m[1],p=Object(a.useState)(!0),g=Object(d.a)(p,2),v=g[0],y=g[1],N=function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),n=t.target.elements.StartDate.value,a=t.target.elements.EndDate.value,e.next=6,k(n,a);case 6:c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O();var e=document.getElementById("StartDate"),t=document.getElementById("EndDate");M(e,2017,(function(){f(!1),h(e.value)})),M(t,new Date(i).getFullYear(),(function(){h(t.value),y(!1)})),B(".detailes-modal-btn"),L(".collapsible")}),[i]),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(u,{Get_Data:N,disabled:x,btnDisabled:v}),Object(j.jsx)(_,{}),n&&Object(j.jsx)(I,{}),Object.entries(D).length>0&&Object(j.jsx)(G,{onClick:function(){return Q(".modal")}}),Object(j.jsx)("div",{id:"detailes-modal",className:"modal",children:Object(j.jsx)(C,{})})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root")),z()}},[[49,1,2]]]);
//# sourceMappingURL=main.35f6ce92.chunk.js.map